# üöÄ H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng Postman test Web API - Student Registration System

## üìã M·ª•c l·ª•c
- [1. Gi·ªõi thi·ªáu](#1-gi·ªõi-thi·ªáu)
- [2. Y√™u c·∫ßu tr∆∞·ªõc khi b·∫Øt ƒë·∫ßu](#2-y√™u-c·∫ßu-tr∆∞·ªõc-khi-b·∫Øt-ƒë·∫ßu)
- [3. C·∫•u h√¨nh m√¥i tr∆∞·ªùng trong Postman](#3-c·∫•u-h√¨nh-m√¥i-tr∆∞·ªùng-trong-postman)
- [4. T·∫°o Request: POST /api/enrollment](#4-t·∫°o-request-post-apienrollment)
- [5. T·∫°o Request: DELETE /api/enrollment/{id}](#5-t·∫°o-request-delete-apienrollmentid)
- [6. T·∫°o Request: GET /api/enrollment/{id}](#6-t·∫°o-request-get-apienrollmentid)
- [7. L∆∞u v√†o Collection](#7-l∆∞u-v√†o-collection)
- [8. Xu·∫•t Collection (cho chia s·∫ª)](#8-xu·∫•t-collection-cho-chia-s·∫ª)
- [9. Test t·ª± ƒë·ªông v·ªõi Tests tab](#9-test-t·ª±-ƒë·ªông-v·ªõi-tests-tab)
- [10. G·ª£i √Ω n√¢ng cao](#10-g·ª£i-√Ω-n√¢ng-cao)

---

## 1. Gi·ªõi thi·ªáu

T√†i li·ªáu n√†y h∆∞·ªõng d·∫´n s·ª≠ d·ª•ng **Postman** ƒë·ªÉ test 3 endpoint quan tr·ªçng c·ªßa Student Registration System:

| Endpoint | Method | M√¥ t·∫£ | Use Case |
|----------|--------|-------|----------|
| `/api/enrollment` | `POST` | ƒêƒÉng k√Ω m√¥n h·ªçc | UC03 |
| `/api/enrollment/{id}` | `DELETE` | H·ªßy ƒëƒÉng k√Ω m√¥n h·ªçc | UC04 |
| `/api/enrollment/{id}` | `GET` | L·∫•y th√¥ng tin enrollment | - |

### üéØ L·ª£i √≠ch s·ª≠ d·ª•ng Postman:
- ‚úÖ **G·ª≠i request nhanh** - Kh√¥ng c·∫ßn vi·∫øt code
- ‚úÖ **Xem response d·ªÖ d√†ng** - Format JSON ƒë·∫πp
- ‚úÖ **L∆∞u request** - T√°i s·ª≠ d·ª•ng nhi·ªÅu l·∫ßn
- ‚úÖ **Test t·ª± ƒë·ªông** - Assert k·∫øt qu·∫£
- ‚úÖ **Chia s·∫ª team** - Export/Import collection

---

## 2. Y√™u c·∫ßu tr∆∞·ªõc khi b·∫Øt ƒë·∫ßu

### üìã Chu·∫©n b·ªã
- ‚úÖ **C√†i ƒë·∫∑t Postman**: [Download Postman](https://www.postman.com/downloads/)
- ‚úÖ **Server ƒëang ch·∫°y**: Web API ph·∫£i ho·∫°t ƒë·ªông
- ‚úÖ **Ki·∫øn th·ª©c c∆° b·∫£n**: HTTP methods, JSON format

### üöÄ Kh·ªüi ƒë·ªông Web API
```bash
# T·ª´ th∆∞ m·ª•c g·ªëc d·ª± √°n
dotnet run --project src/StudentRegistration.Api

# Ho·∫∑c t·ª´ th∆∞ m·ª•c API
cd src/StudentRegistration.Api
dotnet run
```

### üåê URL m·∫∑c ƒë·ªãnh
- **Base URL**: `http://localhost:5255`
- **Swagger UI**: `http://localhost:5255`
- **Health Check**: `http://localhost:5255/health`

### üìù Test Data s·∫µn c√≥
```json
{
  "studentId": "11111111-1111-1111-1111-111111111111",
  "classSectionId": "22222222-2222-2222-2222-222222222222", 
  "semesterId": "20240000-0000-0000-0000-000000000000"
}
```

---

## 3. C·∫•u h√¨nh m√¥i tr∆∞·ªùng trong Postman

### 3.1 T·∫°o Environment "StudentAPI"

1. **M·ªü Postman** ‚Üí Click **"Environments"** ‚Üí **"New"**
2. **ƒê·∫∑t t√™n**: `StudentAPI`
3. **Th√™m bi·∫øn**:

| Variable | Initial Value | Current Value |
|----------|---------------|---------------|
| `baseUrl` | `http://localhost:5255` | `http://localhost:5255` |
| `enrollmentId` | (ƒë·ªÉ tr·ªëng) | (s·∫Ω ƒë∆∞·ª£c set sau) |

4. **B·∫•m "Save"**
5. **Ch·ªçn environment**: ·ªû g√≥c tr√™n b√™n ph·∫£i, ch·ªçn `StudentAPI`

### 3.2 C·∫•u h√¨nh Global Headers (t√πy ch·ªçn)

1. **Settings** ‚Üí **General** ‚Üí **Request Headers**
2. **Th√™m header m·∫∑c ƒë·ªãnh**:
   - `Content-Type`: `application/json`
   - `Accept`: `application/json`

---

## 4. T·∫°o Request: POST /api/enrollment

### 4.1 C·∫•u h√¨nh Request c∆° b·∫£n

1. **T·∫°o request m·ªõi**: Click **"New"** ‚Üí **"Request"**
2. **ƒê·∫∑t t√™n**: `POST Enroll Course`
3. **Method**: `POST`
4. **URL**: `{{baseUrl}}/api/enrollment`

### 4.2 C·∫•u h√¨nh Headers

| Key | Value |
|-----|-------|
| `Content-Type` | `application/json` |
| `Accept` | `application/json` |

### 4.3 C·∫•u h√¨nh Body

**Ch·ªçn**: `Body` ‚Üí `raw` ‚Üí `JSON`

```json
{
  "studentId": "11111111-1111-1111-1111-111111111111",
  "classSectionId": "22222222-2222-2222-2222-222222222222",
  "semesterId": "20240000-0000-0000-0000-000000000000"
}
```

### 4.4 Response mong ƒë·ª£i

#### ‚úÖ Success (201 Created)
```json
{
  "enrollmentId": "3c6a525d-fde6-4081-bf25-8ea963d49584",
  "studentId": "11111111-1111-1111-1111-111111111111",
  "classSectionId": "22222222-2222-2222-2222-222222222222",
  "semesterId": "20240000-0000-0000-0000-000000000000",
  "enrollmentDate": "2024-06-23T23:15:30.1234567Z"
}
```

#### ‚ùå Error Cases

**400 Bad Request** - Validation error:
```json
{
  "message": "Invalid request data",
  "errorCode": "VALIDATION_ERROR"
}
```

**409 Conflict** - Business rule violation:
```json
{
  "message": "Sinh vi√™n ƒë√£ ƒëƒÉng k√Ω ƒë·ªß 7 m√¥n h·ªçc trong h·ªçc k·ª≥ n√†y",
  "errorCode": "MAX_ENROLLMENT_EXCEEDED"
}
```

### 4.5 L∆∞u enrollmentId t·ª± ƒë·ªông

**Tests tab** - Th√™m script ƒë·ªÉ l∆∞u enrollmentId:
```javascript
if (pm.response.code === 201) {
    const response = pm.response.json();
    pm.environment.set("enrollmentId", response.enrollmentId);
    console.log("Enrollment ID saved:", response.enrollmentId);
}
```

---

## 5. T·∫°o Request: DELETE /api/enrollment/{id}

### 5.1 C·∫•u h√¨nh Request c∆° b·∫£n

1. **T·∫°o request m·ªõi**: Click **"New"** ‚Üí **"Request"**
2. **ƒê·∫∑t t√™n**: `DELETE Drop Course`
3. **Method**: `DELETE`
4. **URL**: `{{baseUrl}}/api/enrollment/{{enrollmentId}}`

### 5.2 C·∫•u h√¨nh Headers

| Key | Value |
|-----|-------|
| `Accept` | `application/json` |

### 5.3 Body
**Kh√¥ng c·∫ßn body** cho DELETE request

### 5.4 Response mong ƒë·ª£i

#### ‚úÖ Success (204 No Content)
```http
HTTP/1.1 204 No Content
```

#### ‚ùå Error Cases

**404 Not Found** - Enrollment kh√¥ng t·ªìn t·∫°i:
```json
{
  "message": "Kh√¥ng t√¨m th·∫•y enrollment",
  "errorCode": "ENROLLMENT_NOT_FOUND"
}
```

**403 Forbidden** - M√¥n b·∫Øt bu·ªôc ho·∫∑c qu√° h·∫°n:
```json
{
  "message": "Kh√¥ng ƒë∆∞·ª£c h·ªßy m√¥n h·ªçc b·∫Øt bu·ªôc",
  "errorCode": "CANNOT_DROP_MANDATORY_COURSE"
}
```

---

## 6. T·∫°o Request: GET /api/enrollment/{id}

### 6.1 C·∫•u h√¨nh Request c∆° b·∫£n

1. **T·∫°o request m·ªõi**: Click **"New"** ‚Üí **"Request"**
2. **ƒê·∫∑t t√™n**: `GET Enrollment Info`
3. **Method**: `GET`
4. **URL**: `{{baseUrl}}/api/enrollment/{{enrollmentId}}`

### 6.2 C·∫•u h√¨nh Headers

| Key | Value |
|-----|-------|
| `Accept` | `application/json` |

### 6.3 Response mong ƒë·ª£i

#### ‚úÖ Success (200 OK)
```json
{
  "enrollmentId": "3c6a525d-fde6-4081-bf25-8ea963d49584",
  "studentId": "11111111-1111-1111-1111-111111111111",
  "classSectionId": "22222222-2222-2222-2222-222222222222",
  "semesterId": "2024-06-23T23:15:30.1234567Z",
  "enrollmentDate": "2024-06-23T23:15:30.1234567Z"
}
```

#### ‚ùå Error (404 Not Found)
```json
{
  "message": "Kh√¥ng t√¨m th·∫•y enrollment",
  "errorCode": "ENROLLMENT_NOT_FOUND"
}
```

---

## 7. L∆∞u v√†o Collection

### 7.1 T·∫°o Collection

1. **T·∫°o Collection**: Click **"New"** ‚Üí **"Collection"**
2. **ƒê·∫∑t t√™n**: `Student Registration API`
3. **M√¥ t·∫£**: `API testing for Student Registration System`

### 7.2 Th√™m requests v√†o Collection

1. **K√©o th·∫£** ho·∫∑c **Copy** 3 requests v√†o collection
2. **S·∫Øp x·∫øp th·ª© t·ª±**:
   - `POST Enroll Course`
   - `GET Enrollment Info`
   - `DELETE Drop Course`

### 7.3 C·∫•u h√¨nh Collection

1. **Click v√†o Collection** ‚Üí **"Edit"**
2. **Variables**:
   - `baseUrl`: `http://localhost:5255`
3. **Authorization**: None (cho development)
4. **Pre-request Scripts**: (t√πy ch·ªçn)

---

## 8. Xu·∫•t Collection (cho chia s·∫ª)

### 8.1 Export Collection

1. **Click v√†o Collection** ‚Üí **"..."** ‚Üí **"Export"**
2. **Ch·ªçn format**: `Collection v2.1 (recommended)`
3. **B·∫•m "Export"**
4. **L∆∞u file**: `StudentRegistrationAPI.postman_collection.json`

### 8.2 Import Collection

1. **Import**: Click **"Import"** ‚Üí **"Upload Files"**
2. **Ch·ªçn file**: `.json` ƒë√£ export
3. **Import**: Collection s·∫Ω xu·∫•t hi·ªán trong workspace

### 8.3 Chia s·∫ª v·ªõi team

- **File collection**: G·ª≠i file `.json`
- **Environment**: Export environment ri√™ng
- **Documentation**: K√®m theo t√†i li·ªáu n√†y

---

## 9. Test t·ª± ƒë·ªông v·ªõi Tests tab

### 9.1 Tests cho POST /api/enrollment

**Tests tab** - Th√™m script:
```javascript
// Test status code
pm.test("Status code is 201", function () {
    pm.response.to.have.status(201);
});

// Test response structure
pm.test("Response has enrollmentId", function () {
    const response = pm.response.json();
    pm.expect(response).to.have.property('enrollmentId');
    pm.expect(response.enrollmentId).to.be.a('string');
});

// Save enrollmentId for next request
if (pm.response.code === 201) {
    const response = pm.response.json();
    pm.environment.set("enrollmentId", response.enrollmentId);
    console.log("‚úÖ Enrollment created:", response.enrollmentId);
}
```

### 9.2 Tests cho DELETE /api/enrollment/{id}

**Tests tab** - Th√™m script:
```javascript
// Test status code
pm.test("Status code is 204", function () {
    pm.response.to.have.status(204);
});

// Test response is empty
pm.test("Response is empty", function () {
    pm.response.to.not.have.body();
});

console.log("‚úÖ Enrollment deleted successfully");
```

### 9.3 Tests cho GET /api/enrollment/{id}

**Tests tab** - Th√™m script:
```javascript
// Test status code
pm.test("Status code is 200", function () {
    pm.response.to.have.status(200);
});

// Test response structure
pm.test("Response has required fields", function () {
    const response = pm.response.json();
    pm.expect(response).to.have.property('enrollmentId');
    pm.expect(response).to.have.property('studentId');
    pm.expect(response).to.have.property('classSectionId');
    pm.expect(response).to.have.property('semesterId');
    pm.expect(response).to.have.property('enrollmentDate');
});

console.log("‚úÖ Enrollment info retrieved");
```

---

## 10. G·ª£i √Ω n√¢ng cao

### 10.1 Pre-request Scripts

**Generate GUID t·ª± ƒë·ªông** (Pre-request Script):
```javascript
// Generate random GUID for testing
function generateGuid() {
    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
        var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);
        return v.toString(16);
    });
}

// Set random studentId if not exists
if (!pm.environment.get("studentId")) {
    pm.environment.set("studentId", generateGuid());
}
```

### 10.2 Collection Runner

**Ch·∫°y h√†ng lo·∫°t request**:
1. **Collection** ‚Üí **"Run collection"**
2. **Ch·ªçn requests** c·∫ßn ch·∫°y
3. **Iterations**: S·ªë l·∫ßn ch·∫°y
4. **Delay**: Th·ªùi gian ch·ªù gi·ªØa requests
5. **B·∫•m "Run"**

### 10.3 Newman (Command Line)

**C√†i ƒë·∫∑t Newman**:
```bash
npm install -g newman
```

**Ch·∫°y collection t·ª´ command line**:
```bash
newman run StudentRegistrationAPI.postman_collection.json \
  --environment StudentAPI.postman_environment.json \
  --reporters cli,json \
  --reporter-json-export results.json
```

### 10.4 Environment Variables

**T·∫°o nhi·ªÅu environment**:
- `Development`: `http://localhost:5255`
- `Staging`: `https://staging-api.example.com`
- `Production`: `https://api.example.com`

### 10.5 Data Files

**S·ª≠ d·ª•ng CSV/JSON data**:
1. **T·∫°o file**: `test-data.csv`
2. **Format**:
```csv
studentId,classSectionId,semesterId
11111111-1111-1111-1111-111111111111,22222222-2222-2222-2222-222222222222,20240000-0000-0000-0000-000000000000
33333333-3333-3333-3333-333333333333,44444444-4444-4444-4444-444444444444,20240000-0000-0000-0000-000000000000
```
3. **Collection Runner** ‚Üí **Data** ‚Üí **Select file**

---

## üìù L∆∞u √Ω quan tr·ªçng

### üîß Troubleshooting

| V·∫•n ƒë·ªÅ | Nguy√™n nh√¢n | C√°ch x·ª≠ l√Ω |
|--------|-------------|------------|
| **Connection refused** | API ch∆∞a ch·∫°y | `dotnet run --project src/StudentRegistration.Api` |
| **404 Not Found** | URL sai | Ki·ªÉm tra `baseUrl` v√† endpoint |
| **400 Bad Request** | JSON format sai | Validate JSON syntax |
| **409 Conflict** | Business rule | Xem error message chi ti·∫øt |

### üéØ Best Practices

- ‚úÖ **L∆∞u enrollmentId** sau khi t·∫°o th√†nh c√¥ng
- ‚úÖ **Test theo th·ª© t·ª±**: POST ‚Üí GET ‚Üí DELETE
- ‚úÖ **S·ª≠ d·ª•ng environment variables** thay v√¨ hardcode
- ‚úÖ **Th√™m tests** ƒë·ªÉ validate response
- ‚úÖ **Export collection** ƒë·ªÉ chia s·∫ª team

### üìä Monitoring

- **Response time**: Ki·ªÉm tra performance
- **Status codes**: ƒê·∫£m b·∫£o ƒë√∫ng business logic
- **Error messages**: Debug d·ªÖ d√†ng
- **Logs**: K·∫øt h·ª£p v·ªõi server logs

---

## üéâ K·∫øt lu·∫≠n

V·ªõi h∆∞·ªõng d·∫´n n√†y, b·∫°n c√≥ th·ªÉ:
- ‚úÖ **Test API nhanh ch√≥ng** trong 5 ph√∫t
- ‚úÖ **T·ª± ƒë·ªông h√≥a testing** v·ªõi scripts
- ‚úÖ **Chia s·∫ª v·ªõi team** qua collection
- ‚úÖ **Debug hi·ªáu qu·∫£** v·ªõi detailed responses

**Happy Testing! üöÄ** 